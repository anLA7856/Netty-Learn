## 安全性

### Netty SSL安全特性
Netty通过SslHandler提供了对SSL的支持，它支持的SSL协议包括：SSL V2,SSL V3,和TLS

#### 单向认证原理
1. SSL客户端向服务端传送SSL协议版本号、支持的加密算法种类，产生的随机数，以及其他可选信息
2. 服务端返回握手应答，向客户端传送确认SSL协议的版本号，加密算法种类，随机数以及其他相关信息
3. 服务端向客户端发送自己的公钥
4. 客户端对服务端的证书进行验证，服务端的合法性包括，证书是否有效，发型证书的CA是否靠谱，
    发型者证书的公钥能否正确解开服务器证书的数字签名，域名是否匹配
5. 客户端随机产生一个用于后面通讯的对称密码，然后用服务端的公钥对其进行加密，将加密后的预主密码传给服务端
6. 服务端用自己的似钥解开预主密码然后执行一系列步骤来产生主密码
7. 客户端向服务端发送信息，指明后面的数据通讯将使用主密码为对称密钥，同时通知服务器客户端的握手过程结束
8. 服务端向客户端发送消息，指明数据通讯将以主密码为对称密钥，同时通知客户端服务端的握手过程结束
9. SSL的握手部分结束，SSL安全通道建立，客户端和服务端开始使用相同的对称密钥进行加密，然后通过Socket进行传输。

### SSL双向认证
与单项认证不同的是，服务端也需要对客户端进行安全认证，这就意味着客户端的自签名证书也需要导入到服务端的数字证书仓库中。

### 第三方CA认证
1. 服务端证书制作
    - 利用OpenSSL生成CA证书
    - 生成服务端密钥对
    - 生成证书签名请求
    - 用CA似钥进行签名
    - 导入信任的CA根证书到keystore
    - 将CA签名后的server端导入keystore
2. 客户端证书制作
    - 生成客户端密钥对
    - 生成证书签名请求
    - 用CA似钥进行签名
    - 导入信任的CA根证书到keystore
    - 讲CA签名后的client证书导入keystore
    
### Netty SSL源码

#### 客户端。
当客户端和服务端的TCP链路建立成功之后，SslHandler的channelActive被触发，SSL客户端通过SSL引擎发起握手请求。

#### 服务端
ssl服务端接受握手请求的消息入口方法是decode


### Netty扩展的安全特性
1. IP地址黑名单
2. 接入认证
        